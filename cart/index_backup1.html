<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Cart â€“ Porch Logic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../styles.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="/styles/bg.css" />
</head>

<body class="cart-page">
    <main>
        
        <a href="../m8-plate/" class="cart-icon shop-link" aria-label="Back to shop">
            Shop
        </a>

        <div class="content">
            <h1>CART</h1>
            <section class="cart-grid">
                <div class="cart-panel cart-items">
                    <div class="cart-header-row">
                        <span class="col-label col-label--item">Item</span>
                        <span class="col-label">Options</span>
                        <span class="col-label col-label--qty">Qty</span>
                        <span class="col-label col-label--total">Total</span>
                    </div>

                    <div id="cart-items-container"></div>

                    <p class="cart-note" id="cart-note">
                        Adjust options or remove items before checkout.
                    </p>
                </div>

                <div class="cart-panel cart-summary">
                    <h2 class="summary-label">Order Summary</h2>

                    <div class="summary-lines">
                        <div class="summary-line">
                            <span>Subtotal</span>
                            <span data-cart-subtotal>$0.00</span>
                        </div>
                        <div class="summary-line summary-line--muted">
                            <span>Shipping</span>
                            <span>Calculated at checkout</span>
                        </div>
                        <div class="summary-line summary-line--muted">
                            <span>Tax</span>
                            <span>Calculated at checkout</span>
                        </div>
                        <div class="summary-line summary-line--total">
                            <span>Total</span>
                            <span data-cart-total>$0.00</span>
                        </div>
                    </div>

                    <p class="summary-note">
                        All prices in USD. Duties and import fees may apply for international orders.
                    </p>

                    <button type="button" id="go-to-checkout" class="summary-button" disabled>
                        Proceed to checkout
                    </button>
                    <a href="../m8-plate/" class="summary-link">Continue shopping</a>
                </div>
            </section>
        </div>
    </main>

    <!-- Full-screen glyph editor modal -->
    <div id="glyph-modal" class="glyph-modal hidden">
        <div class="glyph-modal-inner card">
            <header class="glyph-modal-header">
                <h2>Custom AM8 Glyph</h2>
            </header>
            <p class="glyph-modal-subtitle">
                Sculpt your glyph by clicking and dragging. Right-click to flatten segments.
            </p>
            <div id="glyph-modal-editor" class="glyph-modal-editor"></div>
            <button type="button" class="glyph-modal-close" aria-label="Close glyph editor">
                Close
            </button>
        </div>
    </div>

    <script src="./cart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const checkoutBtn = document.getElementById('go-to-checkout');
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', () => {
                    const cartItems = getCartItems();
                    if (!cartItems || cartItems.length === 0) return;
                    window.location.href = '../checkout/';
                });
            }
        });
    </script>
</body>

</html>
